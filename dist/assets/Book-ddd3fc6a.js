import{_ as v,t as P,v as S,d as B,z as E,j as g,o as r,c as I,w as l,E as z,b,f as o,i as N,N as $,e as n,n as T,P as A,Q as D,R as V,S as M,F as R}from"./index-7206ec31.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 */const j={class:"header"},q=["src"],F={key:0,style:{color:"green"}},L={key:1,style:{color:"red"}},Q=["onClick"],G=["onClick"],H=["onClick"],J={__name:"Book",setup(K){const h=P(),{goTop:i}=h.appContext.config.globalProperties,p=S(),t=B({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10});E(()=>{c()});const c=()=>{t.loading=!0,g.get("/books/list",{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then(e=>{t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1,i&&i()})},k=()=>{p.push({path:"/add"})},m=e=>{p.push({path:"/add",query:{id:e}})},f=e=>{t.currentPage=e,c()},d=(e,u)=>{g.put(`/books/status/${u}`,{ids:e?[e]:[]}).then(()=>{R.success("修改成功"),c()})};return(e,u)=>{const w=T,a=A,y=D,x=V,C=z;return r(),I(C,{class:"book-container"},{header:l(()=>[b("div",j,[o(w,{type:"primary",icon:$(M),onClick:k},{default:l(()=>[N("新增图书")]),_:1},8,["icon"])])]),default:l(()=>[o(y,{load:t.loading,data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"}},{default:l(()=>[o(a,{prop:"booksId",label:"图书编号"}),o(a,{prop:"booksName",label:"图书名",width:"150px","show-overflow-tooltip":!0}),o(a,{prop:"booksAuthor",label:"图书作者",width:"150px","show-overflow-tooltip":!0}),o(a,{prop:"booksAuthorCountry",label:"图书作者国籍"}),o(a,{prop:"booksPublish",label:"出版社出版时间"}),o(a,{prop:"booksIntro",label:"图书简介",width:"300px","show-overflow-tooltip":!0}),o(a,{label:"图书图片",width:"150px"},{default:l(s=>[(r(),n("img",{style:{width:"100px",height:"100px"},key:s.row.booksId,src:e.$filters.prefix(s.row.booksCoverImg),alt:"图书主图"},null,8,q))]),_:1}),o(a,{prop:"stockNum",label:"图书库存"}),o(a,{prop:"sellingPrice",label:"图书售价"}),o(a,{label:"上架状态"},{default:l(s=>[s.row.booksSellStatus===0?(r(),n("span",F,"销售中")):(r(),n("span",L,"已下架"))]),_:1}),o(a,{label:"操作",width:"100"},{default:l(s=>[b("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:_=>m(s.row.booksId)},"修改",8,Q),s.row.booksSellStatus===0?(r(),n("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>d(s.row.booksId,1)},"下架",8,G)):(r(),n("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>d(s.row.booksId,0)},"上架",8,H))]),_:1})]),_:1},8,["load","data"]),o(x,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:f},null,8,["total","page-size","current-page"])]),_:1})}}},to=v(J,[["__scopeId","data-v-8abb0e0c"]]);export{to as default};
