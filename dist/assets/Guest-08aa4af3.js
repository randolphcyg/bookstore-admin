import{t as y,d as v,z as P,j as d,o as S,e as w,f as a,w as n,W as z,M as E,Q as x,R as N,r as T,c as D,E as F,b as g,i as m,N as f,D as b,X as h,F as c,n as B,P as L,S as I,T as M}from"./index-7206ec31.js";/* empty css             *//* empty css                     *//* empty css                 *//* empty css              *//* empty css               *//* empty css                  */const V={__name:"Table",props:{action:String},setup(_,{expose:l}){const i=_,u=y(),{goTop:r}=u.appContext.config.globalProperties,e=v({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});P(()=>{s()});const s=()=>{e.loading=!0,d.get(i.action,{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,r&&r()})},o=t=>{e.multipleSelection=t},p=t=>{e.currentPage=t,s()};return l({state:e,getList:s}),(t,j)=>{const k=x,C=N;return S(),w(E,null,[a(k,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:o},{default:n(()=>[z(t.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:p},null,8,["total","page-size","current-page"])],64)}}},$={class:"header"},H={__name:"Guest",setup(_){let l=T(null);const i=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}d.put("/users/0",{ids:l.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("解除成功"),l.value.getList()})},u=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}d.put("/users/1",{ids:l.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("禁用成功"),l.value.getList()})};return(r,e)=>{const s=B,o=L,p=F;return S(),D(p,{class:"guest-container"},{header:n(()=>[g("div",$,[a(s,{type:"primary",icon:f(I),onClick:i},{default:n(()=>[m("解除禁用")]),_:1},8,["icon"]),a(s,{type:"danger",icon:f(M),onClick:u},{default:n(()=>[m("禁用账户")]),_:1},8,["icon"])])]),default:n(()=>[a(V,{action:"/users",ref_key:"table",ref:l},{column:n(()=>[a(o,{type:"selection",width:"55"}),a(o,{prop:"nickName",label:"昵称"}),a(o,{prop:"loginName",label:"登录名"}),a(o,{label:"身份状态"},{default:n(t=>[g("span",{style:h(t.row.lockedFlag===0?"color: green;":"color: red;")},b(t.row.lockedFlag===0?"正常":"禁用"),5)]),_:1}),a(o,{label:"是否注销"},{default:n(t=>[g("span",{style:h(t.row.lockedFlag===0?"color: green;":"color: red;")},b(t.row.isDeleted===0?"正常":"注销"),5)]),_:1}),a(o,{prop:"createTime",label:"注册时间"})]),_:1},512)]),_:1})}}};export{H as default};
