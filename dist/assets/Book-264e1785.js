import{_ as v,t as P,v as S,d as B,z as E,j as g,o as l,c as I,w as n,E as z,b as k,f as o,N,e as r,i as $,n as T,P as D,Q as V,R as M,S as R,F as j}from"./index-a28300c9.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 */const q={class:"header"},A=$("新增图书"),F=["src"],L={key:0,style:{color:"green"}},Q={key:1,style:{color:"red"}},G=["onClick"],H=["onClick"],J=["onClick"],K={__name:"Book",setup(O){const b=P(),{goTop:i}=b.appContext.config.globalProperties,p=S(),e=B({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10});E(()=>{c()});const c=()=>{e.loading=!0,g.get("/books/list",{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,i&&i()})},h=()=>{p.push({path:"/add"})},m=t=>{p.push({path:"/add",query:{id:t}})},f=t=>{e.currentPage=t,c()},d=(t,_)=>{g.put(`/books/status/${_}`,{ids:t?[t]:[]}).then(()=>{j.success("修改成功"),c()})};return(t,_)=>{const y=T,s=D,C=V,x=M,w=z;return l(),I(w,{class:"book-container"},{header:n(()=>[k("div",q,[o(y,{type:"primary",icon:N(R),onClick:h},{default:n(()=>[A]),_:1},8,["icon"])])]),default:n(()=>[o(C,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"}},{default:n(()=>[o(s,{prop:"booksId",label:"图书编号"}),o(s,{prop:"booksName",label:"图书名"}),o(s,{prop:"booksIntro",label:"图书简介"}),o(s,{label:"图书图片",width:"150px"},{default:n(a=>[(l(),r("img",{style:{width:"100px",height:"100px"},key:a.row.booksId,src:t.$filters.prefix(a.row.booksCoverImg),alt:"图书主图"},null,8,F))]),_:1}),o(s,{prop:"stockNum",label:"图书库存"}),o(s,{prop:"sellingPrice",label:"图书售价"}),o(s,{label:"上架状态"},{default:n(a=>[a.row.booksSellStatus===0?(l(),r("span",L,"销售中")):(l(),r("span",Q,"已下架"))]),_:1}),o(s,{label:"操作",width:"100"},{default:n(a=>[k("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:u=>m(a.row.booksId)},"修改",8,G),a.row.booksSellStatus===0?(l(),r("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:u=>d(a.row.booksId,1)},"下架",8,H)):(l(),r("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:u=>d(a.row.booksId,0)},"上架",8,J))]),_:1})]),_:1},8,["load","data"]),o(x,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:f},null,8,["total","page-size","current-page"])]),_:1})}}},oe=v(K,[["__scopeId","data-v-63cde0fa"]]);export{oe as default};
