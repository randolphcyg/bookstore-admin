import{v,g as y,d as P,l as d,o as b,h as w,f as a,w as n,W as E,N as x,R as z,S as N,r as T,c as F,E as B,b as g,O as m,F as f,X as h,k as S,G as c,s as D,Q as L,T as I,U as V}from"./index-7dc32317.js";/* empty css             *//* empty css                     *//* empty css                 *//* empty css              *//* empty css               *//* empty css                  */const G={__name:"Table",props:{action:String},setup(_,{expose:l}){const i=_,u=v(),{goTop:s}=u.appContext.config.globalProperties,e=y({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});P(()=>{r()});const r=()=>{e.loading=!0,d.get(i.action,{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,s&&s()})},o=t=>{e.multipleSelection=t},p=t=>{e.currentPage=t,r()};return l({state:e,getList:r}),(t,Q)=>{const k=z,C=N;return b(),w(x,null,[a(k,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:o},{default:n(()=>[E(t.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:p},null,8,["total","page-size","current-page"])],64)}}},M={class:"header"},$=S("解除禁用"),O=S("禁用账户"),H={__name:"Guest",setup(_){let l=T(null);const i=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}d.put("/users/0",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{c.success("解除成功"),l.value.getList()})},u=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}d.put("/users/1",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{c.success("禁用成功"),l.value.getList()})};return(s,e)=>{const r=D,o=L,p=B;return b(),F(p,{class:"guest-container"},{header:n(()=>[g("div",M,[a(r,{type:"primary",icon:m(I),onClick:i},{default:n(()=>[$]),_:1},8,["icon"]),a(r,{type:"danger",icon:m(V),onClick:u},{default:n(()=>[O]),_:1},8,["icon"])])]),default:n(()=>[a(G,{action:"/users",ref_key:"table",ref:l},{column:n(()=>[a(o,{type:"selection",width:"55"}),a(o,{prop:"nickName",label:"昵称"}),a(o,{prop:"loginName",label:"登录名"}),a(o,{label:"身份状态"},{default:n(t=>[g("span",{style:h(t.row.lockedFlag==0?"color: green;":"color: red;")},f(t.row.lockedFlag==0?"正常":"禁用"),5)]),_:1}),a(o,{label:"是否注销"},{default:n(t=>[g("span",{style:h(t.row.lockedFlag==0?"color: green;":"color: red;")},f(t.row.isDeleted==0?"正常":"注销"),5)]),_:1}),a(o,{prop:"createTime",label:"注册时间"})]),_:1},512)]),_:1})}}};export{H as default};
