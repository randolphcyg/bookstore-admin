import{r as _,g as k,d as V,l as r,o as h,h as x,f as a,w as l,N as b,E as y,k as F,G as g,n as U,q as E,s as v,j as q}from"./index-7dc32317.js";/* empty css             *//* empty css                  *//* empty css              */import{m as f}from"./md5-9f548a8e.js";const C=F("确认修改"),R=F("确认修改"),G={__name:"Account",setup(B){const u=_(null),d=_(null),e=k({user:null,nameForm:{loginName:"",nickName:""},passForm:{oldpass:"",newpass:""},rules:{loginName:[{required:"true",message:"登录名不能为空",trigger:["change"]}],nickName:[{required:"true",message:"昵称不能为空",trigger:["change"]}],oldpass:[{required:"true",message:"原密码不能为空",trigger:["change"]}],newpass:[{required:"true",message:"新密码不能为空",trigger:["change"]}]}});V(()=>{r.get("/adminUser/profile").then(s=>{e.user=s,e.nameForm.loginName=s.loginUserName,e.nameForm.nickName=s.nickName})});const w=()=>{u.value.validate(s=>{s&&r.put("/adminUser/name",{loginUserName:e.nameForm.loginName,nickName:e.nameForm.nickName}).then(()=>{g.success("修改成功"),window.location.reload()})})},N=()=>{d.value.validate(s=>{s&&r.put("/adminUser/password",{originalPassword:f(e.passForm.oldpass),newPassword:f(e.passForm.newpass)}).then(()=>{g.success("修改成功"),window.location.reload()})})};return(s,o)=>{const m=U,t=E,i=v,p=q,c=y;return h(),x(b,null,[a(c,{class:"account-container"},{default:l(()=>[a(p,{model:e.nameForm,rules:e.rules,ref_key:"nameRef",ref:u,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:l(()=>[a(t,{label:"登录名：",prop:"loginName"},{default:l(()=>[a(m,{style:{width:"200px"},modelValue:e.nameForm.loginName,"onUpdate:modelValue":o[0]||(o[0]=n=>e.nameForm.loginName=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"昵称：",prop:"nickName"},{default:l(()=>[a(m,{style:{width:"200px"},modelValue:e.nameForm.nickName,"onUpdate:modelValue":o[1]||(o[1]=n=>e.nameForm.nickName=n)},null,8,["modelValue"])]),_:1}),a(t,null,{default:l(()=>[a(i,{type:"danger",onClick:w},{default:l(()=>[C]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),a(c,{class:"account-container"},{default:l(()=>[a(p,{model:e.passForm,rules:e.rules,ref_key:"passRef",ref:d,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:l(()=>[a(t,{label:"原密码：",prop:"oldpass"},{default:l(()=>[a(m,{style:{width:"200px"},modelValue:e.passForm.oldpass,"onUpdate:modelValue":o[2]||(o[2]=n=>e.passForm.oldpass=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"新密码：",prop:"newpass"},{default:l(()=>[a(m,{style:{width:"200px"},modelValue:e.passForm.newpass,"onUpdate:modelValue":o[3]||(o[3]=n=>e.passForm.newpass=n)},null,8,["modelValue"])]),_:1}),a(t,null,{default:l(()=>[a(i,{type:"danger",onClick:N},{default:l(()=>[R]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)}}};export{G as default};
