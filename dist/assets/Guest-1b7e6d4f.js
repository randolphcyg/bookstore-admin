import{t as y,d as v,z as P,j as g,o as b,e as w,f as a,w as n,W as z,M as E,Q as x,R as N,r as T,c as D,E as F,b as d,N as m,D as f,X as h,i as S,F as c,n as B,P as L,S as I,T as M}from"./index-02e3512c.js";/* empty css             *//* empty css                     *//* empty css                 *//* empty css              *//* empty css               *//* empty css                  */const V={__name:"Table",props:{action:String},setup(_,{expose:l}){const i=_,u=y(),{goTop:s}=u.appContext.config.globalProperties,e=v({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});P(()=>{r()});const r=()=>{e.loading=!0,g.get(i.action,{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,s&&s()})},o=t=>{e.multipleSelection=t},p=t=>{e.currentPage=t,r()};return l({state:e,getList:r}),(t,Q)=>{const k=x,C=N;return b(),w(E,null,[a(k,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:o},{default:n(()=>[z(t.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:p},null,8,["total","page-size","current-page"])],64)}}},$={class:"header"},j=S("解除禁用"),G=S("禁用账户"),K={__name:"Guest",setup(_){let l=T(null);const i=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}g.put("/users/0",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{c.success("解除成功"),l.value.getList()})},u=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}g.put("/users/1",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{c.success("禁用成功"),l.value.getList()})};return(s,e)=>{const r=B,o=L,p=F;return b(),D(p,{class:"guest-container"},{header:n(()=>[d("div",$,[a(r,{type:"primary",icon:m(I),onClick:i},{default:n(()=>[j]),_:1},8,["icon"]),a(r,{type:"danger",icon:m(M),onClick:u},{default:n(()=>[G]),_:1},8,["icon"])])]),default:n(()=>[a(V,{action:"/users",ref_key:"table",ref:l},{column:n(()=>[a(o,{type:"selection",width:"55"}),a(o,{prop:"nickName",label:"昵称"}),a(o,{prop:"loginName",label:"登录名"}),a(o,{label:"身份状态"},{default:n(t=>[d("span",{style:h(t.row.lockedFlag===0?"color: green;":"color: red;")},f(t.row.lockedFlag===0?"正常":"禁用"),5)]),_:1}),a(o,{label:"是否注销"},{default:n(t=>[d("span",{style:h(t.row.lockedFlag===0?"color: green;":"color: red;")},f(t.row.isDeleted===0?"正常":"注销"),5)]),_:1}),a(o,{prop:"createTime",label:"注册时间"})]),_:1},512)]),_:1})}}};export{K as default};
